package com.example.XyhubHelpdesk.Controller;

import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.RestController;

@CrossOrigin
@RestController
public class HelpdeskIssueController {

	private final Logger logger = LoggerFactory.getLogger(HelpdeskIssueController.class);

	@Autowired
	HelpDeskIssueService helpDeskIssueService;
	
	
	@PostMapping("/addHelpDeskIssue")
	public ApiResponse addIssue(@RequestBody HelpDeskIssueTypes helpDeskIssue) throws Exception {
		logger.info("Received request to add issue");
		return helpDeskIssueService.addIssueType(helpDeskIssue);
	}
	
	@PutMapping("/editIssues/{issueTypeId}")
	public ApiResponse editIssue(@RequestBody HelpDeskIssueTypes Request,
			@PathVariable String issueTypeId) throws Exception {
		logger.info("received request to editIssue");
		return helpDeskIssueService.editIssueType(Request, issueTypeId);
	}
	
	/*@GetMapping(value = { AuthConstants.INFRA_ADMIN_BASEPATH + "/getIssues/{issue_Id}",
			AuthConstants.INFRA_USER_BASEPATH + "/getIssues/{issue_Id}",
			AuthConstants.ADMIN_BASEPATH + "/getIssues/{issue_Id}"})
    public ApiResponse getIssues(@PathVariable String issue_Id, Pageable pageable) {
	        logger.info("Received request to get issue by Id");
			return helpDeskIssueService.getIssues(issue_Id, pageable);
	}*/
	
	@GetMapping("/getAllIssues")
	     public ApiResponse getAllIssues(Pageable pageable) {
	 	        logger.info("Received request to get all issues");
	 			return helpDeskIssueService.getAllissues(pageable);
	 	 }
	
	@GetMapping("/searchhelpdeskIssueType/{searchString}")
	 public ApiResponse searchhelpdeskIssueType(@PathVariable String searchString) {
			logger.info("Received request to search IssueType");
			return helpDeskIssueService.searchhelpdeskIssueType(searchString);
	 }

	
	
}
